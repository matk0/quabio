<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <div class="bg-white shadow">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="py-6">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-3xl font-bold text-gray-900">üìö Spr√°va zdrojov</h1>
            <p class="mt-1 text-sm text-gray-500">Prehƒæad a anal√Ωza zdrojov pou≈æ√≠van√Ωch v konverz√°ci√°ch</p>
          </div>
          
          <!-- Statistics Cards -->
          <div class="grid grid-cols-3 gap-4">
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-blue-600"><%= @total_sources %></div>
              <div class="text-xs text-blue-800">Celkom zdrojov</div>
            </div>
            <div class="bg-green-50 border border-green-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-green-600"><%= @total_usage %></div>
              <div class="text-xs text-green-800">Celkov√© pou≈æitia</div>
            </div>
            <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 text-center">
              <div class="text-2xl font-bold text-purple-600">
                <%= @most_used_source ? @most_used_source.message_sources.count : 0 %>
              </div>
              <div class="text-xs text-purple-800">Najpou≈æ√≠vanej≈°√≠</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <% if @sources.any? %>
      <!-- Sources Table -->
      <div class="bg-white shadow rounded-lg overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200">
          <h2 class="text-lg font-medium text-gray-900">Zoznam zdrojov</h2>
        </div>
        
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Zdroj
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Pou≈æitia
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Vytvoren√©
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  Akcie
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <% @sources.each do |source| %>
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm font-medium text-gray-900">
                      <%= truncate(source.title, length: 60) %>
                    </div>
                    <% if source.excerpt.present? %>
                      <div class="text-sm text-gray-500">
                        <%= truncate(source.excerpt, length: 80) %>
                      </div>
                    <% end %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                                 <%= source.usage_count.to_i > 5 ? 'bg-green-100 text-green-800' : 
                                     source.usage_count.to_i > 2 ? 'bg-yellow-100 text-yellow-800' : 
                                     'bg-gray-100 text-gray-800' %>">
                      <%= source.usage_count %> kr√°t
                    </span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <%= source.created_at.strftime("%d.%m.%Y %H:%M") %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <%= link_to "Detail", source_path(source), 
                        class: "text-blue-600 hover:text-blue-900 font-medium" %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        
        <!-- Showing first 50 sources, ordered by usage -->
        <div class="px-6 py-4 border-t border-gray-200 text-sm text-gray-500">
          Zobrazuje sa prv√Ωch 50 zdrojov zoraden√Ωch podƒæa pou≈æitia
        </div>
      </div>
    <% else %>
      <!-- Empty State -->
      <div class="text-center py-12">
        <div class="mx-auto h-12 w-12 text-gray-400">
          üìö
        </div>
        <h3 class="mt-2 text-sm font-medium text-gray-900">≈Ωiadne zdroje</h3>
        <p class="mt-1 text-sm text-gray-500">Zatiaƒæ neboli pou≈æit√© ≈æiadne zdroje v konverz√°ci√°ch.</p>
      </div>
    <% end %>
  </div>
</div>